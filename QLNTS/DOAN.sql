CREATE DATABASE DOANVANG
USE DOANVANG
CREATE TABLE NHANVIEN
(
	MANHANVIEN NVARCHAR(30) NOT NULL,
	TENNHANVIEN NVARCHAR(30),
	NAMSINH DATETIME,
	NGAYBATDAULAM DATETIME,
	SONGAYLAM INT,
	CHUCVU NVARCHAR(30),
	LUONGCHINHTHUC FLOAT,
	TENTAIKHOAN NVARCHAR(30) NOT NULL,
	MATKHAU NVARCHAR(30),
	HINHANH NVARCHAR(30),
	PRIMARY KEY (MANHANVIEN),
)
SET DATEFORMAT dmy ;
go
INSERT INTO NHANVIEN
VALUES('QL1','Lê Tự Kiên','19/10/2001','30/9/2001',NULL,'Quản Lý  ',100000000,'KIEN123','THEKOP123','hinh1.jpg')
INSERT INTO NHANVIEN
VALUES('QL2','Nguyễn Nhật Tân','29/07/2001','30/9/2019',NULL,'Quản Lý ',100000000,'TAN123','THEKOP456','hinh2.jpg')
INSERT INTO NHANVIEN
VALUES('NV1','Salah','11/11/2019','26/10/2021','150','Nhân Viên',15000,'SALAH11','LVP11','hinh3.jpg')
INSERT INTO NHANVIEN
VALUES('NV2','VanDijk','4/4/2019','26/10/2021','152','Nhân Viên',14500,'DIJK4','LVP4','hinh4.jpg')
INSERT INTO NHANVIEN
VALUES('NV3','Jota','29/9/2019','26/10/2001','130','Nhân Viên',13900,'JOTA20','LVP20','hinh5.jpg')
INSERT INTO NHANVIEN
VALUES('NV4','Keita','8/8/2019','26/10/2001','90','Nhân Viên',12000,'KEITA8','LVP8','hinh6.jpg')
INSERT INTO NHANVIEN
VALUES('NV5','Firmono','9/9/2019','26/10/2001','155','Nhân Viên',14400,'BOBBY','LVP9','hinh7.jpg')
INSERT INTO NHANVIEN
VALUES('NV6','Henderson','14/10/2019','26/10/2021','200','Nhân Viên ',20000,'HENDO','LVP14','hinh8.jpg')
INSERT INTO NHANVIEN
VALUES('NV7','Allison','1/1/2019','26/10/2021','149','Nhân Viên',14000,'BECKER1','LVP1','hinh9.jpg')
select * from NHANVIEN
CREATE TABLE KHACH
(
	MAKHACHHANG NVARCHAR(30) NOT NULL,
	TENKHACHHANG NVARCHAR(30),
	NAMSINH DATETIME,
	DIACHI NVARCHAR(30),
	SDT NVARCHAR(30),
	LANTHUMAYMUA INT,
	PRIMARY KEY (MAKHACHHANG),
)
insert into KHACH
values('KH1','Robertson','07/02/1994','Scotland',840912345678,1)
insert into KHACH
values('KH2','Torres','07/06/1998','Spain',840398756132,1)
insert into KHACH
values('KH3','Lukaku','06/05/1992','Bi',849875641236,2)
insert into KHACH
values('KH4','Ozil','04/04/1999','Germany',84963258741,1)
insert into KHACH
values('KH5','Binz','03/11/1988','VietNam',84852147369,3)
insert into KHACH
values('KH6','Wowy','04/1/1998','VietNam',8485214878,2)
SELECT * FROM KHACH
CREATE TABLE CHATLIEU
(
	MACHATLIEU NVARCHAR(30) NOT NULL,
	TENCHATLIEU NVARCHAR(30),
	GIATRI INT,
	GIATRITIENTE NVARCHAR(30),
	HINHANHCHATLIEU NVARCHAR(30),
	PRIMARY KEY(MACHATLIEU),
)
insert into CHATLIEU
VALUES('CL1','KIMCUONG',1000,'DOLLAR','hinh10.jpg')
insert into CHATLIEU
VALUES('CL2','BACHKIM',950,'DOLLAR','hinh11.jpg')
insert into CHATLIEU
VALUES('CL3','VANG',700,'DOLLAR','hinh12.jpg')
insert into CHATLIEU
VALUES('CL4','BAC',500,'DOLLAR','hinh13.jpg')
SELECT * FROM CHATLIEU
CREATE TABLE TRANGSUC
(
	MATRANGSUC NVARCHAR(30) NOT NULL,
	LOAITRANGSUC NVARCHAR(30) ,
	HINHANH NVARCHAR(30),
	PRIMARY KEY(MATRANGSUC),
)
INSERT INTO TRANGSUC
VALUES('TS1','MAT KINH ','hinh14.jpg')
INSERT INTO TRANGSUC
VALUES('TS2','BONG TAI ','hinh15.jpg')
INSERT INTO TRANGSUC
VALUES('TS3','NHAN ','hinh14.jpg')
INSERT INTO TRANGSUC
VALUES('TS4','LAC TAY ','hinh14.jpg')
INSERT INTO TRANGSUC
VALUES('TS5','VONG DEO TAY','hinh15.jpg')
INSERT INTO TRANGSUC
VALUES('TS6','DAY CHUYEN ','hinh16.jpg')
INSERT INTO TRANGSUC
VALUES('TS7','LAC CHAN','hinh17.jpg')
INSERT INTO TRANGSUC
VALUES('TS8','DONG HO ','hinh18.jpg')
SELECT * FROM TRANGSUC
SELECT * FROM CHATLIEU
CREATE TABLE SANPHAM
(
	MACHATLIEU NVARCHAR(30),
	MATRANGSUC NVARCHAR(30),
	MASANPHAM NVARCHAR(30) NOT NULL,
	TENSANPHAM NVARCHAR(30),
	GIASANPHAM FLOAT,
	SOLUONGCOSAN INT,
	HINHANHSANPHAM NVARCHAR(30),
	PRIMARY KEY(MASANPHAM),
	CONSTRAINT FK_11 FOREIGN KEY (MATRANGSUC) REFERENCES TRANGSUC(MATRANGSUC),
	CONSTRAINT FK_12 FOREIGN KEY (MACHATLIEU) REFERENCES CHATLIEU(MACHATLIEU),
)
SELECT * FROM SANPHAM 
CREATE TABLE HOADON
(
	MAHOADON NVARCHAR(30) NOT NULL,
	MAKHACHHANG NVARCHAR(30),
	MANHANVIEN NVARCHAR(30),
	NGAYMUA DATETIME,
	THANHTOAN FLOAT,
	PRIMARY KEY(MAHOADON),
	CONSTRAINT FK_4 FOREIGN KEY (MAKHACHHANG) REFERENCES KHACH(MAKHACHHANG),
	CONSTRAINT FK_9 FOREIGN KEY (MANHANVIEN) REFERENCES NHANVIEN(MANHANVIEN),
)
insert into ('HD1','KH1','NV1','15/05/2025',)
CREATE TABLE CHITIETHOADON
(
	MAHOADON NVARCHAR(30) NOT NULL,
	MASANPHAM NVARCHAR(30) NOT NULL,
	MAHOADONDV NVARCHAR(30),
	SOLUONGMUA INT,
	GIASANPHAM FLOAT,
	TONGTIEN FLOAT,
	PRIMARY KEY (MAHOADON,MASANPHAM),
	CONSTRAINT FK_5 FOREIGN KEY(MASANPHAM) REFERENCES SANPHAM(MASANPHAM),
	CONSTRAINT FK_10 FOREIGN KEY(MAHOADON) REFERENCES HOADON(MAHOADON),
	CONSTRAINT FK_24 FOREIGN KEY(MAHOADONDV) REFERENCES CHITIETDV(MAHOADONDV),
)
CREATE TABLE DICHVU
(
	MADICHVU NVARCHAR(30) NOT NULL,
	TENDICHVU NVARCHAR(30),
	GIADICHVU INT,
	LOIYEUCAU NVARCHAR(100),
	PRIMARY KEY(MADICHVU),
)
insert into DICHVU
values('DV1',N'Tẩy Rửa',500,NULL)
insert into DICHVU
values('DV2',N'Sửa Chữa',1000,N'Tùy Thuộc Vào Độ Hư Hỏng')
insert into DICHVU
values('DV3',N'Thêm Chất Liệu Kim Cường ',1500,N'100gram')
insert into DICHVU
values('DV4',N'Thêm Chất Liệu Bạch Kim ',1200,N'70gram')
insert into DICHVU
values('DV5',N'Thêm Chất Liệu Vàng',950,N'200gram')
SELECT * FROM DICHVU
CREATE TABLE HOADONDV
(
	MAHOADONDV NVARCHAR(30) NOT NULL,
	MAKHACHHANG NVARCHAR(30),
	MANHANVIEN NVARCHAR(30),
	NGAY DATE ,
	THANHTIEN FLOAT,
	PRIMARY KEY (MAHOADONDV),
)
CREATE TABLE CHITIETDV
(
	MAHOADONDV NVARCHAR(30) NOT NULL,
	MADICHVU NVARCHAR(30),
	DONGIA FLOAT,
	SOLUONG INT,
	TONGTIENDV FLOAT,
	PRIMARY KEY (MAHOADONDV),
	CONSTRAINT FK_20 FOREIGN KEY(MAHOADONDV) REFERENCES HOADONDV(MAHOADONDV),
	CONSTRAINT FK_30 FOREIGN KEY(MADICHVU) REFERENCES DICHVU(MADICHVU),
)

insert into HOADON
Values
('HD1','KH2','NV1','15/05/2025',5000000)
insert into HOADON
Values
('HD2','KH6','NV4','11/11/2025',4500000),
('HD3','KH1','NV3','04/02/2025',300000),
('HD4','KH4','NV2','09/05/2025',15000000),
('HD5','KH5','NV6','10/12/2025',10000000)
insert into HOADON
Values
('HD6','KH3','NV2','01/01/2025',2500),
('HD7','KH2','NV3','09/10/2025',7800),
('HD8','KH1','NV5','11/12/2025',9500),
('HD9','KH4','NV1','08/12/2025',700)
select * from HOADON


INSERT INTO CHITIETHOADON
VALUES('HD1','SP1','HDDV1',2,10000,21000)
INSERT INTO CHITIETHOADON
VALUES('HD6','SP9','HDDV4',1,2500,5350)
INSERT INTO CHITIETHOADON
VALUES('HD7','SP3','HDDV3',3,23400,24600)
INSERT INTO CHITIETHOADON
VALUES('HD8','SP10','HDDV2',2,19600,20100)

SELECT * FROM CHITIETHOADON
insert into HOADONDV
values
('HDDV1','KH2','NV5','11/10/2026','500'),
('HDDV2','KH1','NV6','04/06/2026','500'),
('HDDV3','KH5','NV3','12/01/2026','1200'),
('HDDV4','KH3','NV1','04/05/2026','950'),
('HDDV5','KH4','NV2','11/10/2026','1500')
INSERT INTO CHITIETDV
VALUES
('HDDV1','DV1','500',2,1000),
('HDDV2','DV1','500',1,500),
('HDDV3','DV4','1200',1,1200),
('HDDV4','DV5','950',3,2850),
('HDDV5','DV3','1000',1,1000)